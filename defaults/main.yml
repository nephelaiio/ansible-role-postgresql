---
postgresql_release: 16
postgresql_package_state: present
postgresql_service_state: started
postgresql_service_enabled: true
postgresql_db_init: true
postgresql_db_path: /var/lib/postgresql
postgresql_user: postgres
postgresql_group: postgres
postgresql_datadir: "/var/lib/postgresql/data"
postgresql_roles: []
postgresql_databases: []
postgresql_auth_method: md5  # [ scram-sha-256 | md5 ]
postgresql_default_database: postgres
postgresql_locale: en_US.UTF-8

__postgresql_package_name:
  debian:
    - "postgresql-{{ postgresql_release }}"
    - "postgresql-client-{{ postgresql_release }}"
  redhat:
    - "postgresql{{ postgresql_release }}-server"
    - "postgresql{{ postgresql_release }}"
    - "glibc-langpack-{{ postgresql_locale | regex_replace('_.*', '') }}"
__postgresql_service_name:
  debian: "postgresql@{{ postgresql_release }}-main"
  redhat: "postgresql-{{ postgresql_release }}"
__postgresql_bindir:
  redhat: "/usr/pgsql-{{ postgresql_release }}/bin"
  debian: "/usr/lib/postgresql/{{ postgresql_release }}/bin"
__postgresql_configfile:
  redhat: "{{ postgresql_datadir }}/postgresql.conf"
  debian: "/etc/postgresql/{{ postgresql_release }}/main/postgresql.conf"

__postgresql_os_search:
  - "{{ ansible_distribution | lower }}-{{ ansible_distribution_release | lower }}"
  - "{{ ansible_distribution | lower }}-{{ ansible_distribution_major_version }}"
  - "{{ ansible_distribution | lower }}"
  - "{{ ansible_os_family | lower }}"
  - "default"
